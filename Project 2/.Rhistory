NEI <- readRDS("./Data/exdata-data-NEI_data/summarySCC_PM25.rds")
SCC <- readRDS("./Data/exdata-data-NEI_data/Source_Classification_Code.rds")
View(NEI)
View(SCC)
Emissions <- aggregate(NEI[, 'Emissions'], by = list(NEI$year), FUN = sum)
Emissions$PM <- round(Emissions[, 2] / 1000, 2)
png(filename = "plot1.png")
barplot(Emissions$PM, names.arg = Emissions$Group.1, main = expression('Total Emission of PM'[2.5]), xlab = 'Year', ylab = expression(paste('PM', ''[2.5], ' in Kilotons')))
dev.off()
Baltimore <- subset(NEI, fips == '24510')
png(filename = 'plot2.png')
barplot(tapply(X = MD$Emissions, INDEX = MD$year, FUN = sum), main = 'Total Emission in Baltimore City, MD', xlab = 'Year', ylab = expression('PM'[2.5]))
dev.off()
Baltimore <- subset(NEI, fips == '24510')
png(filename = 'plot2.png')
barplot(tapply(X = Baltimore$Emissions, INDEX = Baltimore$year, FUN = sum), main = 'Total Emission in Baltimore City, Maryland', xlab = 'Year', ylab = expression('PM'[2.5]))
dev.off()
Baltimore <- subset(NEI, fips == 24510)
png(filename = 'plot2.png')
barplot(tapply(X = Baltimore$Emissions, INDEX = Baltimore$year, FUN = sum), main = 'Total Emission in Baltimore City, Maryland', xlab = 'Year', ylab = expression('PM'[2.5]))
dev.off()
library(ggplot2)
library(ggplot2)
png('plot3.png')
ggplot(data = Baltimore, aes(x = year, y = log(Emissions)))
+ facet_grid(. ~ type)
+ guides(fill = F)
+ geom_boxplot(aes(fill = type))
+ stat_boxplot(geom = 'errorbar')
+ ylab(expression(paste('Log', ' of PM'[2.5], ' Emissions')))
+ xlab('Year') + ggtitle('Emissions per Type in Baltimore City, Maryland')
+ geom_jitter(alpha = 0.10)
dev.off()
library(ggplot2)
png('plot3.png')
g <- ggplot(data = Baltimore, aes(x = year, y = log(Emissions)))
g   + facet_grid(. ~ type)
+ guides(fill = F)
+ geom_boxplot(aes(fill = type))
+ stat_boxplot(geom = 'errorbar')
+ ylab(expression(paste('Log', ' of PM'[2.5], ' Emissions')))
+ xlab('Year')
+ ggtitle('Emissions per Type in Baltimore City, Maryland')
+ geom_jitter(alpha = 0.10)
dev.off()
library(ggplot2)
png('plot3.png')
ggplot(data = Baltimore, aes(x = year, y = log(Emissions))) + facet_grid(. ~ type) + guides(fill = F) + geom_boxplot(aes(fill = type)) + stat_boxplot(geom = 'errorbar') + ylab(expression(paste('Log', ' of PM'[2.5], ' Emissions'))) + xlab('Year') + ggtitle('Emissions per Type in Baltimore City, Maryland') + geom_jitter(alpha = 0.10)
dev.off()
library(ggplot2)
png('plot3.png', width = 800, height = 500, units = 'px')
ggplot(data = Baltimore, aes(x = year, y = log(Emissions))) + facet_grid(. ~ type) + guides(fill = F) + geom_boxplot(aes(fill = type)) + stat_boxplot(geom = 'errorbar') + ylab(expression(paste('Log', ' of PM'[2.5], ' Emissions'))) + xlab('Year') + ggtitle('Emissions per Type in Baltimore City, Maryland') + geom_jitter(alpha = 0.10)
dev.off()
View(Emissions)
View(Baltimore)
coal <- SCC[grepl("coal", SCC$Short.Name, ignore.case = TRUE), ]
merge <- merge(x = NEI, y = SCC.coal, by = 'SCC')
merge.sum <- aggregate(merge[, 'Emissions'], by = list(merge$year), sum)
colnames(merge.sum) <- c('Year', 'Emissions')
library(ggplot2)
png('plot4.png')
ggplot(data = merge.sum, aes(x = Year, y = Emissions / 1000)) + geom_line(aes(group = 1, col = Emissions)) + geom_point(aes(size = 2, col = Emissions)) + ggtitle(expression('Total Emissions of PM'[2.5])) + ylab(expression(paste('PM', ''[2.5], ' in kilotons'))) + geom_text(aes(label = round(Emissions / 1000, digits = 2), size = 2, hjust = 1.5, vjust = 1.5)) + theme(legend.position = 'none') + scale_colour_gradient(low = 'black', high = 'red')
dev.off()
coal <- SCC[grepl("coal", SCC$Short.Name, ignore.case = TRUE), ]
merge <- merge(x = NEI, y = coal, by = 'SCC')
merge.sum <- aggregate(merge[, 'Emissions'], by = list(merge$year), sum)
colnames(merge.sum) <- c('Year', 'Emissions')
library(ggplot2)
png('plot4.png')
ggplot(data = merge.sum, aes(x = Year, y = Emissions / 1000)) + geom_line(aes(group = 1, col = Emissions)) + geom_point(aes(size = 2, col = Emissions)) + ggtitle(expression('Total Emissions of PM'[2.5])) + ylab(expression(paste('PM', ''[2.5], ' in kilotons'))) + geom_text(aes(label = round(Emissions / 1000, digits = 2), size = 2, hjust = 1.5, vjust = 1.5)) + theme(legend.position = 'none') + scale_colour_gradient(low = 'black', high = 'red')
dev.off()
coal <- SCC[grepl("coal", SCC$Short.Name, ignore.case = TRUE), ]
merge <- merge(x = NEI, y = coal, by = 'SCC')
sum <- aggregate(merge[, 'Emissions'], by = list(merge$year), sum)
colnames(sum) <- c('Year', 'Emissions')
library(ggplot2)
png('plot4.png')
ggplot(data = sum, aes(x = Year, y = Emissions / 1000)) + geom_line(aes(group = 1, col = Emissions)) + geom_point(aes(size = 2, col = Emissions)) + ggtitle(expression('Total Emissions of PM'[2.5])) + ylab(expression(paste('PM', ''[2.5], ' in kilotons'))) + geom_text(aes(label = round(Emissions / 1000, digits = 2), size = 2, hjust = 1.5, vjust = 1.5)) + theme(legend.position = 'none') + scale_colour_gradient(low = 'black', high = 'red')
dev.off()
onroad <- subset(NEI, fips == 24510 & type == 'ON-ROAD')
sum <- aggregate(onroad[, 'Emissions'], by = list(onroad$year), sum)
colnames(sum) <- c('year', 'Emissions')
library(ggplot2)
png('plot5.png')
ggplot(data = sum, aes(x = year, y = Emissions)) + geom_bar(aes(fill = year), stat = "identity") + guides(fill = F) + ggtitle('Total Emissions of Motor Vehicle Sources in Baltimore City, Maryland') + ylab(expression('PM'[2.5])) + xlab('Year') + theme(legend.position = 'none') + geom_text(aes(label = round(Emissions, 0), size = 1, hjust = 0.5, vjust = 2))
dev.off()
NEI$year <- factor(NEI$year, levels = c('1999', '2002', '2005', '2008'))
MD.onroad <- subset(NEI, fips == '24510' & type == 'ON-ROAD')
CA.onroad <- subset(NEI, fips == '06037' & type == 'ON-ROAD')
MD.DF <- aggregate(MD.onroad[, 'Emissions'], by = list(MD.onroad$year), sum)
colnames(MD.DF) <- c('year', 'Emissions')
MD.DF$City <- paste(rep('MD', 4))
CA.DF <- aggregate(CA.onroad[, 'Emissions'], by = list(CA.onroad$year), sum)
colnames(CA.DF) <- c('year', 'Emissions')
CA.DF$City <- paste(rep('CA', 4))
DF <- as.data.frame(rbind(MD.DF, CA.DF))
png('plot6.png')
ggplot(data = DF, aes(x = year, y = Emissions)) + geom_bar(aes(fill = year),stat = "identity") + guides(fill = F) + ggtitle('Total Emissions of Motor Vehicle Sources\nLos Angeles County, California vs. Baltimore City, Maryland') + ylab(expression('PM'[2.5])) + xlab('Year') + theme(legend.position = 'none') + facet_grid(. ~ City) + geom_text(aes(label = round(Emissions, 0), size = 1, hjust = 0.5, vjust = -1))
dev.off()
